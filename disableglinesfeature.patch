Backport feature DISABLE_GLINES from ircu, failsafe.

http://hg.quakenet.org/snircd/annotate/cbe949e1747d/ChangeLog#l1032

http://hg.quakenet.org/snircd/diff/ca5d46b8b58c/include/ircd_features.h
http://hg.quakenet.org/snircd/diff/ca5d46b8b58c/ircd/ircd_features.c
http://hg.quakenet.org/snircd/diff/c72fde627760/ircd/s_conf.c
http://hg.quakenet.org/snircd/diff/ca5d46b8b58c/ircd/gline.c#l1.127

diff -r c825da4e7165 include/ircd_features.h
--- a/include/ircd_features.h
+++ b/include/ircd_features.h
@@ -62,6 +62,7 @@
   FEAT_ZANNELS,
   FEAT_LOCAL_CHANNELS,
   FEAT_TOPIC_BURST,
+  FEAT_DISABLE_GLINES,
   FEAT_AUTOCHANMODES,
   FEAT_AUTOCHANMODES_LIST,
 
diff -r c825da4e7165 ircd/gline.c
--- a/ircd/gline.c
+++ b/ircd/gline.c
@@ -215,6 +215,9 @@
   struct Client *acptr;
   int fd, retval = 0, tval;
 
+  if (feature_bool(FEAT_DISABLE_GLINES))
+    return 0; /* G-lines are disabled */
+
   if (!GlineIsActive(gline)) /* no action taken on inactive glines */
     return 0;
 
@@ -1016,6 +1019,9 @@
   struct Gline *gline;
   struct Gline *sgline;
 
+  if (feature_bool(FEAT_DISABLE_GLINES))
+    return 0; /* G-lines are disabled */
+
   for (gline = GlobalGlineList; gline; gline = sgline) {
     sgline = gline->gl_next;
 
diff -r c825da4e7165 ircd/ircd_features.c
--- a/ircd/ircd_features.c
+++ b/ircd/ircd_features.c
@@ -315,6 +315,7 @@
   F_B(ZANNELS, 0, 1, 0),
   F_B(LOCAL_CHANNELS, 0, 1, 0),
   F_B(TOPIC_BURST, 0, 0, 0),
+  F_B(DISABLE_GLINES, 0, 0, 0),
   F_B(AUTOCHANMODES, 0, 1, 0),
   F_S(AUTOCHANMODES_LIST, FEAT_CASE | FEAT_NULL, "ntCN", 0),
 
diff -r c825da4e7165 ircd/s_conf.c
--- a/ircd/s_conf.c
+++ b/ircd/s_conf.c
@@ -1093,7 +1093,7 @@
    * cause the server to split from the net.
    * -skater_x
    */
-  if (glinecheck && (agline = gline_lookup(cptr, 0)) && GlineIsActive(agline)) {
+  if (glinecheck && !feature_bool(FEAT_DISABLE_GLINES) && (agline = gline_lookup(cptr, 0)) && GlineIsActive(agline)) {
     /*
      * find active glines
      * added a check against the user's IP address to find_gline() -Kev
